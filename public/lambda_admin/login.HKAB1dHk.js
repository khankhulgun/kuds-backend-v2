import{_ as l,s,L as u,U as d,O as r,Q as p,G as m,P as g,M as _,K as h,R as f,u as S,T as v,V as b,o as E,k as L,W as w,X as c}from"./entry.MJ5yZK23.js";import{_ as C}from"./dynamic-import-helper.0gtGTknh.js";const I={props:["selectedLang"],name:"login",data(){return{lambda:s.get(u)}},beforeCreate(){},methods:{onSuccess(e){e.status&&(this.isSuccess=!0,e.oauth?window.location.replace("/oauth2/authorize"):(s.set(d,{...e.data,jwt:void 0}),window.init={user:e.data,firebase_config:this.lambda.notify.firebaseConfig,microserviceSettings:[]},s.set(r,e.token,7*24*60*60*1e3),p(e.token),e.data.role===1?window.location.replace(e.path):m.get("/get-permissions").then(t=>{if(t.data.status){s.set(g,t.data.permission.permissions),s.set(_,t.data.permission.menu),s.set(h,t.data.permission.kruds);let a=f(t.data.permission.menu,null,t.data.permission.kruds);s.set(S,a),t.data.permission.microserviceSettings&&(s.set(v,t.data.permission.microserviceSettings),window.init.microserviceSettings=t.data.permission.microserviceSettings);let n=e.path.replaceAll("#","");if(n.includes("/p/")){let i=n.split("/");i[i.length-1],this.$router.replace("/admin")}else this.$router.replace("/admin")}})))},renderTheme(){return b(()=>C(Object.assign({"../../agent/views/theme/aside/auth/login.vue":()=>c(()=>import("./login.1NEGkDwS.js"),__vite__mapDeps([0,1,2,3]),import.meta.url),"../../agent/views/theme/default/auth/login.vue":()=>c(()=>import("./login.54vsTtEn.js"),__vite__mapDeps([4,2,3]),import.meta.url)}),`../../agent/views/theme/${this.lambda.theme}/auth/login.vue`))}},mounted(){s.get(r)&&m.get("/get-permissions").then(({data:e})=>{e.status&&this.$router.replace("/admin")}).catch(e=>{console.log(e)})}};function T(e,t,a,n,i,o){return E(),L(w(o.renderTheme()),{onSuccess:o.onSuccess,selectedLang:a.selectedLang,lambda:i.lambda},null,40,["onSuccess","selectedLang","lambda"])}const k=l(I,[["render",T]]);export{k as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["./login.1NEGkDwS.js","./nuxt-link.VkhsQTov.js","./entry.MJ5yZK23.js","./entry.0grHjFm8.css","./login.54vsTtEn.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
